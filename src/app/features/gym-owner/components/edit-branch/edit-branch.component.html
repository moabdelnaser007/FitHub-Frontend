<div class="container">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-state">
    <div class="spinner"></div>
    <p>Loading branch data...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="loadError && !isLoading" class="error-state">
    <span class="material-icons">error</span>
    <p>{{ loadError }}</p>
    <button class="btn-retry" (click)="onCancel()">Back to Branches</button>
  </div>

  <!-- Main Content -->
  <main class="main-content" *ngIf="!isLoading && !loadError">
    <div class="content-wrapper">
      <!-- Header -->
      <div>
        <h1>Edit Branch Details</h1>
        <p>Update your branch information below.</p>
        <br>
      </div>

      <!-- Branch Information -->
      <div class="card">
        <h2 class="card-title">Branch Information</h2>
        <div class="form-grid">
          <div class="form-group">
            <label for="branchName">Branch Name</label>
            <input type="text" id="branchName" [(ngModel)]="branchData.name" class="form-input">
          </div>
          
          <div class="form-group">
            <label for="phoneNumber">Phone Number</label>
            <input type="text" id="phoneNumber" [(ngModel)]="branchData.phone" class="form-input">
          </div>

          <div class="form-group">
            <label for="visitCredits">Visit Credits Cost</label>
            <input type="number" id="visitCredits" [(ngModel)]="branchData.visitCreditsCost" class="form-input" min="0">
          </div>

          <div class="form-group full-width">
            <label for="description">Description</label>
            <textarea id="description" [(ngModel)]="branchData.description" class="form-input" rows="3"></textarea>
          </div>

          <div class="form-group full-width">
            <label for="address">Full Address</label>
            <input type="text" id="address" [(ngModel)]="branchData.address" class="form-input">
          </div>

          <div class="form-group">
            <label for="city">City</label>
            <input type="text" id="city" [(ngModel)]="branchData.city" class="form-input">
          </div>
        </div>
      </div>

      <!-- Operating Hours -->
      <div class="card">
        <h2 class="card-title">Operating Hours</h2>
        <div class="form-grid">
          <div class="form-group">
            <label for="openingTime">Opening Time</label>
            <input type="time" id="openingTime" [(ngModel)]="operatingHours.opening" class="form-input">
          </div>
          <div class="form-group">
            <label for="closingTime">Closing Time</label>
            <input type="time" id="closingTime" [(ngModel)]="operatingHours.closing" class="form-input">
          </div>
        </div>
        
        <div class="form-group">
          <label>Working Days</label>
          <div class="days-selector">
            <button 
              *ngFor="let day of weekDays" 
              type="button"
              [class.selected]="day.selected"
              (click)="toggleDay(day)"
              class="day-btn">
              {{ day.label }}
            </button>
          </div>
        </div>
      </div>

      <!-- Gender Type -->
      <div class="card">
        <h2 class="card-title">Gender Type</h2>
        <div class="form-group">
          <label for="genderType">Gender Type <span class="required">*</span></label>
          <select id="genderType" [(ngModel)]="genderType" class="form-input" required>
            <option value="Mixed">Mixed</option>
            <option value="MaleOnly">Males Only</option>
            <option value="FemaleOnly">Females Only</option>
          </select>
        </div>
      </div>

      <!-- Amenities -->
      <div class="card">
        <h2 class="card-title">Amenities</h2>
        <div class="amenities-grid">
          <label *ngFor="let amenity of amenities" class="amenity-item" [class.selected]="amenity.selected">
            <input type="checkbox" [(ngModel)]="amenity.selected">
            <span>{{ amenity.name }}</span>
          </label>
        </div>
      </div>

      <!-- Branch Status -->
      <div class="card">
        <h2 class="card-title">Branch Status</h2>
        <div class="status-section">
          <div class="form-group flex-1">
            <label for="status">Status</label>
            <select id="status" [(ngModel)]="branchStatus" class="form-input">
              <option value="ACTIVE">Active</option>
              <option value="INACTIVE">Inactive</option>
            </select>
          </div>
          <div class="status-badge-wrapper">
            <div class="status-badge" [ngClass]="'status-' + branchStatus.toLowerCase()">
              <span class="status-dot"></span>
              {{ getStatusLabel(branchStatus) }}
            </div>
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="action-buttons">
        <button type="button" class="btn-cancel" (click)="onCancel()" [disabled]="isSaving">Cancel</button>
        <button type="button" class="btn-primary" (click)="onSaveChanges()" [disabled]="isSaving">
          {{ isSaving ? 'Saving...' : 'Save Changes' }}
        </button>
      </div>
    </div>
  </main>
</div>